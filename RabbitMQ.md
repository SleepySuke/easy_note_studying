# RabbitMQ

## 同步调用

同步的优势：

时效性强，等待到结果才返回

存在的问题：

拓展性差、性能下降、级联失败

## 异步调用

异步调用主要基于消息通知的方式

存在三个角色：

消息发送者：投递消息的人，原来的调用方

消息代理：管理、暂存、转发消息，一个转发消息的服务器

消息接收者：接收和处理消息的人，原来服务的提供方

![](assets/RabbitMQ1.png)

优势：

耦合度低，拓展性强

异步调用，无需等待，性能好

故障隔离，下游服务故障不影响上游业务

缓存消息，流量削峰填谷

问题：

不能立即得到结果，时效性差

不确定下游业务是否成功

业务安全依赖于broker的可靠性

## MQ选型

![](assets/RabbitMQ2.png)

Kafka一般用于日志收集

![](assets/RabbitMQ3.png)

RabbitMQ中可以建造一个VirtualHost，虚拟主机，形成数据隔离

## Java客户端

